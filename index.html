<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta name="description" content="The Om programming language.">
        <title>ecore js</title>
        <link href="css/style.css" rel="stylesheet" type="text/css">
        <link type="text/css" rel="stylesheet" href="css/tomorrow-night.css">
        <script type="text/javascript" src="highlight.pack.js"></script>
        <script type="text/javascript">hljs.initHighlightingOnLoad();</script>
        <!--[if lt IE 9]>
        <script src="//html5shiv.googlecode.com/svn/trunk/html5.js">
        </script>
        <![endif]-->
    </head>

    <body>
        <header>
            <nav>
                <a href="#what-is-it">what</a> |
                <a href="#downloads">downloads</a> |
                <a href="#getting-started">guide</a> |
                <a href="#documentation">documentation</a> |
                <a href="https://www.github.com/ghillairet/ecore.js">source</a> |
                <a href="https://www.github.com/ghillairet/ecore.js/issues">issues</a> |
                <a href="https://npmjs.org/package/ecore">npm</a>
            </nav>

            <hgroup>
                <h1>ecore.js</h1>
                <h2 id="tagline"><a href="http://www.eclipse.org/emf">EMF</a> on Javascript</h2>
            </hgroup>
        </header>

        <div id="content">

<section>
<h1 id="what-is-it">What is it</h1>
<p><strong>Ecorejs</strong> brings ecore meta-modeling to Javascript. It implements the ecore model in Javascript and provides JSON and XMI writers and parsers for the browser and nodejs.</p>
</section>
<section>
<h1 id="downloads">Downloads</h1>
<table>
<tbody><tr>
<td>
<a href="https://raw.github.com/ghillairet/ecore.js/master/dist/ecore.js">Development Version (0.3.1)</a>
</td>
<td>
<i>132 kb, Uncompressed with comments</i>
</td>
</tr>
<tr>
<td>
<a href="https://raw.github.com/ghillairet/ecore.js/master/dist/ecore.min.js">Production Version (0.3.1)</a>
</td>
<td>
<i>15 kb Minified &amp; gzipped (59 kb minified)</i>
</td>
</tr>
</tbody>
</table>

</section>
<section>
<h1 id="getting-started">Getting Started</h1>
<p>Browser: Download ecore.js from dist/ folder, and include it in your html along with underscore.js.</p>
<pre><code>&lt;script src=&quot;underscore.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;ecore.js&quot;&gt;&lt;/script&gt;</code></pre>
<p>Node:</p>
<pre><code>npm install ecore

var Ecore = require(&#39;ecore&#39;);</code></pre>
<h2 id="models">Models</h2>
<p>Resources contain model elements and are identified by a URI.</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="kw">var</span> resourceSet = <span class="kw">Ecore.ResourceSet</span>.<span class="fu">create</span>();
<span class="kw">var</span> resource = <span class="kw">resourceSet</span>.<span class="fu">create</span>({ <span class="dt">uri</span>: <span class="ch">&#39;/model.json&#39;</span> });</code></pre>
<pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="kw">var</span> User = <span class="kw">Ecore.EClass</span>.<span class="fu">create</span>({ <span class="dt">name</span>: <span class="ch">&#39;User&#39;</span> });</code></pre>
<p>EAttributes are used to define domain elements elements properties.</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="kw">var</span> UserName = <span class="kw">Ecore.EAttribute</span>.<span class="fu">create</span>({
    <span class="dt">name</span>: <span class="ch">&#39;name&#39;</span>,
    <span class="dt">upperBound</span>: <span class="dv">1</span>,
    <span class="dt">eType</span>: <span class="kw">Ecore</span>.<span class="fu">EString</span>
});</code></pre>
<p>EReferences are used to define links between domain elements.</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="kw">var</span> UserFriends = <span class="kw">Ecore.EReferences</span>.<span class="fu">create</span>({
    <span class="dt">name</span>: <span class="ch">&#39;friends&#39;</span>,
    <span class="dt">upperBound</span>: -<span class="dv">1</span>,
    <span class="dt">containment</span>: <span class="kw">false</span>,
    <span class="dt">eType</span>: User
});</code></pre>
<p>You can now add the features to the User class.</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="kw">User</span>.<span class="fu">get</span>(<span class="ch">&#39;eStructuralFeatures&#39;</span>)
    .<span class="fu">add</span>(UserName)
    .<span class="fu">add</span>(UserFriends);</code></pre>
<p>EPackages represent namespaces for a set of EClasses. It's properties name, nsURI and nsPrefix must be set.</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="kw">var</span> SamplePackage = <span class="kw">Ecore.EPackage</span>.<span class="fu">create</span>({
    <span class="dt">name</span>: <span class="ch">&#39;sample&#39;</span>,
    <span class="dt">nsURI</span>: <span class="ch">&#39;http://www.example.org/sample&#39;</span>,
    <span class="dt">nsPrefix</span>: <span class="ch">&#39;sample&#39;</span>,
    <span class="dt">eClassifiers</span>: [
        User
    ]
});

<span class="co">// Packages must be added directly to the model&#39;s Resource.</span>

<span class="kw">resource</span>.<span class="fu">add</span>(SamplePackage);</code></pre>
<p>You can now create instances of User by calling the same method create on User.</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="kw">var</span> u1 = <span class="kw">User</span>.<span class="fu">create</span>({ <span class="dt">name</span>: <span class="ch">&#39;u1&#39;</span> });
<span class="kw">var</span> u2 = <span class="kw">User</span>.<span class="fu">create</span>();</code></pre>
<p>You can access the istance properties via the methods get and set like this.</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="kw">u2</span>.<span class="fu">set</span>(<span class="ch">&#39;name&#39;</span>, <span class="ch">&#39;u2&#39;</span>);
<span class="kw">u1</span>.<span class="fu">get</span>(<span class="ch">&#39;friends&#39;</span>).<span class="fu">add</span>(u2);</code></pre>
<pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="kw">u1</span>.<span class="fu">get</span>(<span class="ch">&#39;friends&#39;</span>).<span class="fu">each</span>(<span class="kw">function</span>(friend) { <span class="kw">console</span>.<span class="fu">log</span>(friend) });</code></pre>
<h2 id="json">JSON</h2>
<p>JSON is the default serialization format supported by ecore.js. The JSON format is described <a href="https://github.com/ghillairet/emfjson">here</a> and looks like this:</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript">{
    <span class="st">&quot;eClass&quot;</span> : <span class="st">&quot;/model.json#//User&quot;</span>,
    <span class="st">&quot;name&quot;</span> : <span class="st">&quot;u1&quot;</span>,
    <span class="st">&quot;friends&quot;</span> : [
        { <span class="st">&quot;$ref&quot;</span> : <span class="ch">&#39;/u2.json#/&#39;</span>, <span class="dt">eClass</span>: <span class="ch">&#39;/model.json#//User&#39;</span> },
        { <span class="st">&quot;$ref&quot;</span> : <span class="ch">&#39;/u3.json#/&#39;</span>, <span class="dt">eClass</span>: <span class="ch">&#39;/model.json#//User&#39;</span> }
    ]
}</code></pre>
<h2 id="xmi">XMI</h2>
<p>Support for XMI has been added in version 0.3.0. This support requires <a href="https://github.com/isaacs/sax-js">sax.js</a>.</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="kw">var</span> resourceSet = <span class="kw">Ecore.ResourceSet</span>.<span class="fu">create</span>();
<span class="kw">var</span> resource = <span class="kw">resourceSet</span>.<span class="fu">create</span>({ <span class="dt">uri</span>: <span class="ch">&#39;test2.xmi&#39;</span> });

<span class="kw">resource</span>.<span class="fu">parse</span>(data, <span class="kw">Ecore</span>.<span class="fu">XMI</span>); <span class="co">// data being a string containing the XMI.</span>

<span class="kw">resource</span>.<span class="fu">to</span>(<span class="kw">Ecore</span>.<span class="fu">XMI</span>, <span class="kw">true</span>); <span class="co">// returns the XMI string</span></code></pre>
</section>

        </div>
        <footer>
            <p>&copy; 2013 <a href="https://www.github.com/ghillairet">ghillairet</a></p>
        </footer>
    </body>
</html>
